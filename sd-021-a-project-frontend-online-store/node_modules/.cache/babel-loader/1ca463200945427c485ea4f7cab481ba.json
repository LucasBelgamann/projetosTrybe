{"ast":null,"code":"var _jsxFileName = \"/home/lucas/projetosDaTrybe/sd-021-a-project-frontend-online-store/src/Components/ProductDetails.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { addItem, getSavedItens } from '../services/saveProduct';\nimport CartButton from './CartButton';\nimport EvaluationProduct from './EvaluationProduct';\nimport { addEval, getSavedEval } from '../services/saveEvaluation';\n\nclass ProductDetails extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      product: {},\n      productEvaluationList: [],\n      email: '',\n      desc: '',\n      rating: ''\n    };\n\n    this.handleEvaluation = () => {\n      const {\n        rating,\n        email,\n        desc\n      } = this.state;\n      addEval({\n        rating,\n        email,\n        desc\n      });\n      const setEvalList = getSavedEval();\n      this.setState({\n        productEvaluationList: setEvalList,\n        rating: '',\n        email: '',\n        desc: ''\n      });\n    };\n\n    this.handleInput = _ref => {\n      let {\n        target: {\n          name,\n          value\n        }\n      } = _ref;\n      this.setState({\n        [name]: value\n      });\n    };\n  }\n\n  // const { addToCart } = this.props;\n  async componentDidMount() {\n    const {\n      match: {\n        params: {\n          id\n        }\n      }\n    } = this.props;\n    const setEvalList = getSavedEval();\n    this.setState({\n      productEvaluationList: setEvalList,\n      qntCartItems: getSavedItens().length\n    });\n    const url = `https://api.mercadolibre.com/items/${id}`;\n    const getFetch = await fetch(url);\n    const dataJson = await getFetch.json();\n    this.setState({\n      product: dataJson\n    });\n  }\n\n  handleCartClick(cartItem) {\n    addItem(cartItem);\n    this.setState({\n      qntCartItems: getSavedItens().length\n    });\n  }\n\n  render() {\n    const {\n      product,\n      productEvaluationList,\n      email,\n      desc,\n      rating,\n      qntCartItems\n    } = this.state;\n    const {\n      thumbnail: image,\n      title: name,\n      price\n    } = product;\n    console.log(product);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }\n    }, \"Voltar\")), /*#__PURE__*/React.createElement(\"h1\", {\n      \"data-testid\": \"product-detail-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }\n    }, `${name} - ${price}`), /*#__PURE__*/React.createElement(\"img\", {\n      src: image,\n      alt: \"foto do produto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }\n    }, name), /*#__PURE__*/React.createElement(\"button\", {\n      \"data-testid\": \"product-detail-add-to-cart\",\n      type: \"button\",\n      onClick: () => this.handleCartClick(product),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }\n    }, \"Adicionar ao Carrinho\"), /*#__PURE__*/React.createElement(CartButton, {\n      qnt: qntCartItems,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(EvaluationProduct, {\n      onClick: this.handleEvaluation,\n      onChange: this.handleInput,\n      email: email,\n      desc: desc,\n      rating: rating,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }\n    }), productEvaluationList.length > 0 && productEvaluationList.map((elem, index) => /*#__PURE__*/React.createElement(\"div\", {\n      key: index + 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, elem.email), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }, elem.rating), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }\n    }, elem.desc))));\n  }\n\n}\n\nProductDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string\n    })\n  }).isRequired\n};\nexport default ProductDetails;","map":{"version":3,"sources":["/home/lucas/projetosDaTrybe/sd-021-a-project-frontend-online-store/src/Components/ProductDetails.js"],"names":["React","Link","PropTypes","addItem","getSavedItens","CartButton","EvaluationProduct","addEval","getSavedEval","ProductDetails","Component","state","product","productEvaluationList","email","desc","rating","handleEvaluation","setEvalList","setState","handleInput","target","name","value","componentDidMount","match","params","id","props","qntCartItems","length","url","getFetch","fetch","dataJson","json","handleCartClick","cartItem","render","thumbnail","image","title","price","console","log","map","elem","index","propTypes","shape","string","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { addItem, getSavedItens } from '../services/saveProduct';\nimport CartButton from './CartButton';\nimport EvaluationProduct from './EvaluationProduct';\nimport { addEval, getSavedEval } from '../services/saveEvaluation';\n\nclass ProductDetails extends React.Component {\n  state = {\n    product: {},\n    productEvaluationList: [],\n    email: '',\n    desc: '',\n    rating: '',\n  }\n  // const { addToCart } = this.props;\n\n  async componentDidMount() {\n    const { match: { params: { id } } } = this.props;\n    const setEvalList = getSavedEval();\n    this.setState({\n      productEvaluationList: setEvalList,\n      qntCartItems: getSavedItens().length,\n    });\n    const url = `https://api.mercadolibre.com/items/${id}`;\n    const getFetch = await fetch(url);\n    const dataJson = await getFetch.json();\n    this.setState({ product: dataJson });\n  }\n\n  handleCartClick(cartItem) {\n    addItem(cartItem);\n    this.setState({ qntCartItems: getSavedItens().length });\n  }\n\n  handleEvaluation = () => {\n    const { rating, email, desc } = this.state;\n    addEval(\n      {\n        rating,\n        email,\n        desc,\n      },\n    );\n    const setEvalList = getSavedEval();\n    this.setState({\n      productEvaluationList: setEvalList,\n      rating: '',\n      email: '',\n      desc: '',\n    });\n  }\n\n  handleInput = ({ target: { name, value } }) => {\n    this.setState({ [name]: value });\n  }\n\n  render() {\n    const {\n      product,\n      productEvaluationList,\n      email,\n      desc,\n      rating,\n      qntCartItems,\n    } = this.state;\n    const { thumbnail: image, title: name, price } = product;\n    console.log(product);\n    return (\n      <div>\n        <Link to=\"/\">\n          <button type=\"button\">\n            Voltar\n            </button>\n        </Link>\n        <h1 data-testid=\"product-detail-name\">{`${name} - ${price}`}</h1>\n        <img src={ image } alt=\"foto do produto\" />\n        <p>{name}</p>\n        <button\n          data-testid=\"product-detail-add-to-cart\"\n          type=\"button\"\n          onClick={ () => this.handleCartClick(product) }\n        >\n          Adicionar ao Carrinho\n        </button>\n        <CartButton qnt={ qntCartItems } />\n        <EvaluationProduct\n          onClick={ this.handleEvaluation }\n          onChange={ this.handleInput }\n          email={ email }\n          desc={ desc }\n          rating={ rating }\n        />\n        {\n          productEvaluationList.length > 0\n          && (\n            productEvaluationList.map((elem, index) => (\n              <div key={ index + 2 }>\n                <span>{elem.email}</span>\n                <span>{elem.rating}</span>\n                <p>{elem.desc}</p>\n              </div>\n            ))\n          )\n        }\n      </div>\n    );\n  }\n}\n\nProductDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string,\n    }),\n  }).isRequired,\n};\n\nexport default ProductDetails;\n"]},"metadata":{},"sourceType":"module"}