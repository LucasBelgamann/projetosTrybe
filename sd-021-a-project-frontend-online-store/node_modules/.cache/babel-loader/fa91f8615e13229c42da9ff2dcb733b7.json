{"ast":null,"code":"var _jsxFileName = \"/home/lucas/projetosDaTrybe/sd-021-a-project-frontend-online-store/src/Components/Home.js\";\nimport React from 'react';\nimport { getProductsFromCategoryAndQuery } from '../services/api';\nimport FilterableProductList from './FilterableProductList';\nimport SearchBar from './SearchProduct';\nimport CartButton from './CartButton';\nimport Categories from './Categories';\nimport { addItem, getSavedItens } from '../services/saveProduct'; // requisito 14 iniciado\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isFirstLoading: true,\n      searchValue: '',\n      productList: [],\n      radioValue: '',\n      qntCartItems: 0\n    };\n    this.handleSearchButton = this.handleSearchButton.bind(this);\n    this.handleOnInputChange = this.handleOnInputChange.bind(this);\n    this.handleRadioInput = this.handleRadioInput.bind(this);\n    this.handleCartClick = this.handleCartClick.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      qntCartItems: getSavedItens().length\n    });\n  }\n\n  async handleSearchButton(searchValue) {\n    let radio = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n    const {\n      radioValue\n    } = this.state;\n    const setRadio = radio || radioValue;\n    const setProducts = await getProductsFromCategoryAndQuery(setRadio, searchValue);\n\n    if (setProducts) {\n      this.setState({\n        productList: setProducts.results,\n        isFirstLoading: false\n      });\n    }\n  }\n\n  handleOnInputChange(_ref) {\n    let {\n      target: {\n        name,\n        type,\n        checked,\n        value\n      }\n    } = _ref;\n    const checkedValue = type === 'checkbox' ? checked : value;\n    this.setState({\n      [name]: checkedValue\n    });\n  }\n\n  async handleRadioInput(_ref2, searchValue) {\n    let {\n      target: {\n        value\n      }\n    } = _ref2;\n    const setProducts = await getProductsFromCategoryAndQuery(value, searchValue);\n\n    if (!searchValue) {\n      this.setState({\n        productList: setProducts.results,\n        isFirstLoading: false\n      });\n    } else {\n      this.setState({\n        radioValue: value\n      }, await this.handleSearchButton(searchValue, value));\n    }\n  }\n\n  handleCartClick(cartItem) {\n    addItem(cartItem);\n    this.setState({\n      qntCartItems: getSavedItens().length\n    });\n  }\n\n  render() {\n    const {\n      searchValue,\n      productList,\n      isFirstLoading,\n      radioValue,\n      qntCartItems\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"principal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CartButton, {\n      qnt: qntCartItems,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(SearchBar, {\n      onClick: () => this.handleSearchButton(searchValue),\n      onChange: this.handleOnInputChange,\n      value: searchValue,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"button-and-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, isFirstLoading ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"menssage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      \"data-testid\": \"home-initial-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 15\n      }\n    }, \"Digite algum termo de pesquisa ou escolha uma categoria.\")) : /*#__PURE__*/React.createElement(FilterableProductList, {\n      productList: productList,\n      addToCart: this.handleCartClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"nav\", {\n      className: \"nav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Categories, {\n      onClick: e => this.handleRadioInput(e, searchValue),\n      value: radioValue,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/home/lucas/projetosDaTrybe/sd-021-a-project-frontend-online-store/src/Components/Home.js"],"names":["React","getProductsFromCategoryAndQuery","FilterableProductList","SearchBar","CartButton","Categories","addItem","getSavedItens","Home","Component","constructor","props","state","isFirstLoading","searchValue","productList","radioValue","qntCartItems","handleSearchButton","bind","handleOnInputChange","handleRadioInput","handleCartClick","componentDidMount","setState","length","radio","undefined","setRadio","setProducts","results","target","name","type","checked","value","checkedValue","cartItem","render","e"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { getProductsFromCategoryAndQuery } from '../services/api';\nimport FilterableProductList from './FilterableProductList';\nimport SearchBar from './SearchProduct';\nimport CartButton from './CartButton';\nimport Categories from './Categories';\nimport { addItem, getSavedItens } from '../services/saveProduct';\n// requisito 14 iniciado\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isFirstLoading: true,\n      searchValue: '',\n      productList: [],\n      radioValue: '',\n      qntCartItems: 0,\n    };\n\n    this.handleSearchButton = this.handleSearchButton.bind(this);\n    this.handleOnInputChange = this.handleOnInputChange.bind(this);\n    this.handleRadioInput = this.handleRadioInput.bind(this);\n    this.handleCartClick = this.handleCartClick.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({ qntCartItems: getSavedItens().length });\n  }\n\n  async handleSearchButton(searchValue, radio = undefined) {\n    const { radioValue } = this.state;\n    const setRadio = radio || radioValue;\n    const setProducts = await getProductsFromCategoryAndQuery(\n      setRadio,\n      searchValue,\n    );\n    if (setProducts) {\n      this.setState({ productList: setProducts.results, isFirstLoading: false });\n    }\n  }\n\n  handleOnInputChange({ target: { name, type, checked, value } }) {\n    const checkedValue = type === 'checkbox' ? checked : value;\n    this.setState({ [name]: checkedValue });\n  }\n\n  async handleRadioInput({ target: { value } }, searchValue) {\n    const setProducts = await getProductsFromCategoryAndQuery(\n      value,\n      searchValue,\n    );\n    if (!searchValue) {\n      this.setState({ productList: setProducts.results, isFirstLoading: false });\n    } else {\n      this.setState(\n        { radioValue: value }, await this.handleSearchButton(searchValue, value),\n      );\n    }\n  }\n\n  handleCartClick(cartItem) {\n    addItem(cartItem);\n    this.setState({ qntCartItems: getSavedItens().length });\n  }\n\n  render() {\n    const {\n      searchValue,\n      productList,\n      isFirstLoading,\n      radioValue,\n      qntCartItems,\n    } = this.state;\n    return (\n      <div className=\"principal\">\n        \n        <CartButton qnt={ qntCartItems } />\n        <SearchBar\n          onClick={ () => this.handleSearchButton(searchValue) }\n          onChange={ this.handleOnInputChange }\n          value={ searchValue }\n        />\n        <div className=\"button-and-message\">\n          {isFirstLoading ? (\n            <div className=\"menssage\">\n              <h1 data-testid=\"home-initial-message\">\n                Digite algum termo de pesquisa ou escolha uma categoria.\n              </h1>\n            </div>\n          ) : (\n            <FilterableProductList\n              productList={ productList }\n              addToCart={ this.handleCartClick }\n            />\n          )}\n        </div>\n        <nav className=\"nav\">\n          <Categories\n            onClick={\n              (e) => this.handleRadioInput(e, searchValue)\n            }\n            value={ radioValue }\n          />\n        </nav>\n      </div>\n    );\n  }\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}