{"ast":null,"code":"var _jsxFileName = \"/home/lucas/projetosDaTrybe/sd-021-a-project-frontend-online-store/src/Components/ProductDetails.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { addItem } from '../services/saveProduct';\nimport CartButton from './CartButton';\nimport EvaluationProduct from './EvaluationProduct';\nimport { addEval, getSavedEval } from '../services/saveEvaluation';\n\nclass ProductDetails extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      product: {},\n      productEvaluationList: [],\n      email: '',\n      desc: '',\n      rating: ''\n    };\n\n    this.handleEvaluation = () => {\n      const {\n        rating,\n        email,\n        desc\n      } = this.state;\n      addEval({\n        rating,\n        email,\n        desc\n      });\n      const setEvalList = getSavedEval();\n      this.setState({\n        productEvaluationList: setEvalList,\n        rating: '',\n        email: '',\n        desc: ''\n      });\n    };\n\n    this.handleInput = _ref => {\n      let {\n        target: {\n          name,\n          value\n        }\n      } = _ref;\n      this.setState({\n        [name]: value\n      });\n    };\n  }\n\n  // const { addToCart } = this.props;\n  async componentDidMount() {\n    const {\n      match: {\n        params: {\n          id\n        }\n      }\n    } = this.props;\n    const setEvalList = getSavedEval();\n    this.setState({\n      productEvaluationList: setEvalList\n    });\n    const url = `https://api.mercadolibre.com/items/${id}`;\n    const getFetch = await fetch(url);\n    const dataJson = await getFetch.json();\n    this.setState({\n      product: dataJson\n    });\n  }\n\n  handleCartClick(cartItem) {\n    addItem(cartItem);\n  }\n\n  render() {\n    const {\n      product,\n      productEvaluationList,\n      email,\n      desc,\n      rating\n    } = this.state;\n    const {\n      thumbnail: image,\n      title: name,\n      price\n    } = product;\n    console.log(product);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }\n    }, \"Voltar\")), /*#__PURE__*/React.createElement(\"h1\", {\n      \"data-testid\": \"product-detail-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }, `${name} - ${price}`), /*#__PURE__*/React.createElement(\"img\", {\n      src: image,\n      alt: \"foto do produto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }, name), /*#__PURE__*/React.createElement(\"button\", {\n      \"data-testid\": \"product-detail-add-to-cart\",\n      type: \"button\",\n      onClick: () => this.handleCartClick(product),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }\n    }, \"Adicionar ao Carrinho\"), /*#__PURE__*/React.createElement(CartButton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(EvaluationProduct, {\n      onClick: this.handleEvaluation,\n      onChange: this.handleInput,\n      email: email,\n      desc: desc,\n      rating: rating,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }\n    }), productEvaluationList.length > 0 && productEvaluationList.map((elem, index) => /*#__PURE__*/React.createElement(\"div\", {\n      key: index + 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }\n    }, elem.email), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }\n    }, elem.rating), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }, elem.desc))));\n  }\n\n}\n\nProductDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string\n    })\n  }).isRequired\n};\nexport default ProductDetails;","map":{"version":3,"sources":["/home/lucas/projetosDaTrybe/sd-021-a-project-frontend-online-store/src/Components/ProductDetails.js"],"names":["React","Link","PropTypes","addItem","CartButton","EvaluationProduct","addEval","getSavedEval","ProductDetails","Component","state","product","productEvaluationList","email","desc","rating","handleEvaluation","setEvalList","setState","handleInput","target","name","value","componentDidMount","match","params","id","props","url","getFetch","fetch","dataJson","json","handleCartClick","cartItem","render","thumbnail","image","title","price","console","log","length","map","elem","index","propTypes","shape","string","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { addItem } from '../services/saveProduct';\nimport CartButton from './CartButton';\nimport EvaluationProduct from './EvaluationProduct';\nimport { addEval, getSavedEval } from '../services/saveEvaluation';\n\nclass ProductDetails extends React.Component {\n  state = {\n    product: {},\n    productEvaluationList: [],\n    email: '',\n    desc: '',\n    rating: '',\n  }\n  // const { addToCart } = this.props;\n\n  async componentDidMount() {\n    const { match: { params: { id } } } = this.props;\n    const setEvalList = getSavedEval();\n    this.setState({ productEvaluationList: setEvalList });\n    const url = `https://api.mercadolibre.com/items/${id}`;\n    const getFetch = await fetch(url);\n    const dataJson = await getFetch.json();\n    this.setState({ product: dataJson });\n  }\n\n  handleCartClick(cartItem) {\n    addItem(cartItem);\n  }\n\n  handleEvaluation = () => {\n    const { rating, email, desc } = this.state;\n    addEval(\n      {\n        rating,\n        email,\n        desc,\n      },\n    );\n    const setEvalList = getSavedEval();\n    this.setState({\n      productEvaluationList: setEvalList,\n      rating: '',\n      email: '',\n      desc: '',\n    });\n  }\n\n  handleInput = ({ target: { name, value } }) => {\n    this.setState({ [name]: value });\n  }\n\n  render() {\n    const {\n      product,\n      productEvaluationList,\n      email,\n      desc,\n      rating,\n    } = this.state;\n    const { thumbnail: image, title: name, price } = product;\n    console.log(product);\n    return (\n      <div>\n        <Link to=\"/\">\n          <button type=\"button\">Voltar</button>\n        </Link>\n        <h1 data-testid=\"product-detail-name\">{`${name} - ${price}`}</h1>\n        <img src={ image } alt=\"foto do produto\" />\n        <p>{name}</p>\n        <button\n          data-testid=\"product-detail-add-to-cart\"\n          type=\"button\"\n          onClick={ () => this.handleCartClick(product) }\n        >\n          Adicionar ao Carrinho\n        </button>\n        <CartButton />\n        <EvaluationProduct\n          onClick={ this.handleEvaluation }\n          onChange={ this.handleInput }\n          email={ email }\n          desc={ desc }\n          rating={ rating }\n        />\n        {\n          productEvaluationList.length > 0\n          && (\n            productEvaluationList.map((elem, index) => (\n              <div key={ index + 2 }>\n                <span>{elem.email}</span>\n                <span>{elem.rating}</span>\n                <p>{elem.desc}</p>\n              </div>\n            ))\n          )\n        }\n      </div>\n    );\n  }\n}\n\nProductDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string,\n    }),\n  }).isRequired,\n};\n\nexport default ProductDetails;\n"]},"metadata":{},"sourceType":"module"}